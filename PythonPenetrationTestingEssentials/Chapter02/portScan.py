import socket, subprocess, sys
from datetime import datetime

subprocess.call("clear", shell=True)

ip = raw_input("Enter IP to scan: ")
rangeStart = int(raw_input("Enter start port: "))
rangeEnd = int(raw_input("Enter end port: "))

print "Starting scanning operation..."

start = datetime.now()

try:
    for port in range(rangeStart, rangeEnd):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        socket.setdefaulttimeout(1)

        result = sock.connect_ex((ip, port))

        if result == 0:
            print port, "is open."

        sock.close()
except KeyboardInterrupt:
    print "Stopping scanner..."
    sys.exit()

except socket.gaierror:
    print "Host name cannot be resolved."
    sys.exit()

except socket.error:
    print "Could not connect the the server"
    sys.exit()

end = datetime.now()

print "Scan completed in ", (end - start)